# X攻略カリキュラム v3 専門家レビュー会議

**日時**: 2026年1月21日
**議題**: v3章立てのアルゴリズム網羅性検証
**目的**: 実際のXアルゴリズムのソースコードと照合し、漏れがないか徹底検証

## 参加キャラクター（専門家チーム）

| キャラクター | 専門領域 | 視点 |
|-------------|---------|------|
| 🎯 **マコト（天才マーケター）** | SNSマーケティング20年、フォロワー100万人育成実績 | ビジネス・収益化・実践ROI |
| 💻 **タクミ（シニアエンジニア）** | 元Twitter/Meta勤務、推薦システム専門家 | 技術的正確性・アルゴリズム理解 |
| 📈 **リサ（グロースハッカー）** | スタートアップ5社でグロース担当、データドリブン | 成長指標・A/Bテスト・計測 |
| ✍️ **ユウキ（UXライター）** | テクニカルライティング15年、ベストセラー著者 | 読みやすさ・構成・教育効果 |

---

## Part 1: ソースコードとの照合検証

**タクミ**: まず、実際のXアルゴリズムのソースコードと、v3の章立てを照合しよう。網羅性を検証する。

### アルゴリズム主要コンポーネント vs カリキュラム対応表

```
【ソースコード構造】
x-algorithm/
├── home-mixer/          ← オーケストレーション層
│   ├── scorers/         ← スコアリング
│   │   ├── phoenix_scorer.rs
│   │   ├── weighted_scorer.rs
│   │   ├── author_diversity_scorer.rs
│   │   └── oon_scorer.rs
│   ├── filters/         ← フィルタリング
│   │   ├── age_filter.rs
│   │   ├── drop_duplicates_filter.rs
│   │   ├── muted_keyword_filter.rs
│   │   ├── author_socialgraph_filter.rs
│   │   └── ... (12種類)
│   └── candidate_pipeline/
├── phoenix/             ← MLモデル
│   ├── recsys_model.py  ← ランキングモデル
│   ├── grok.py          ← Transformer実装
│   └── recsys_retrieval_model.py ← 検索モデル
├── thunder/             ← インネットワーク
│   └── thunder_service.rs
└── candidate-pipeline/  ← パイプラインフレームワーク
```

**タクミ**: 各コンポーネントがv3でカバーされているか確認する。

| ソースコード | 機能 | v3での対応 | 網羅度 |
|-------------|------|-----------|--------|
| **weighted_scorer.rs** | 重み付きスコア計算 | 第3章 | ⚠️ 70% |
| **phoenix_scorer.rs** | 19種類のアクション予測 | 第2章 | ⚠️ 60% |
| **author_diversity_scorer.rs** | 著者多様性 | 第6章 | ✅ 90% |
| **oon_scorer.rs** | IN/OON係数 | 第6章 | ✅ 85% |
| **age_filter.rs** | 投稿年齢フィルター | 第5章 | ⚠️ 50% |
| **muted_keyword_filter.rs** | ミュートキーワード | 第5章 | ⚠️ 40% |
| **author_socialgraph_filter.rs** | ブロック/ミュート | 第5章 | ⚠️ 40% |
| **recsys_model.py** | Transformerランキング | 補足A | ✅ 80% |
| **grok.py** | アテンションマスク | 補足A | ⚠️ 30% |
| **thunder_service.rs** | インネットワーク取得 | 第6章 | ⚠️ 50% |
| **recsys_retrieval_model.py** | Two-Tower検索 | 第6章 | ⚠️ 40% |

**マコト**: これ見ると、技術的な網羅度が全体的に低いな。

**タクミ**: 問題は3つある。

---

## Part 2: 発見された問題点

### 問題1: スコアリングの詳細が不足

**タクミ**: `weighted_scorer.rs`を見ると、実際には19種類のスコアが計算されている。

```rust
// 実際のコード（weighted_scorer.rs）
let combined_score = Self::apply(s.favorite_score, p::FAVORITE_WEIGHT)
    + Self::apply(s.reply_score, p::REPLY_WEIGHT)
    + Self::apply(s.retweet_score, p::RETWEET_WEIGHT)
    + Self::apply(s.photo_expand_score, p::PHOTO_EXPAND_WEIGHT)
    + Self::apply(s.click_score, p::CLICK_WEIGHT)
    + Self::apply(s.profile_click_score, p::PROFILE_CLICK_WEIGHT)
    + Self::apply(s.vqv_score, vqv_weight)
    + Self::apply(s.share_score, p::SHARE_WEIGHT)
    + Self::apply(s.share_via_dm_score, p::SHARE_VIA_DM_WEIGHT)
    + Self::apply(s.share_via_copy_link_score, p::SHARE_VIA_COPY_LINK_WEIGHT)
    + Self::apply(s.dwell_score, p::DWELL_WEIGHT)
    + Self::apply(s.quote_score, p::QUOTE_WEIGHT)
    + Self::apply(s.quoted_click_score, p::QUOTED_CLICK_WEIGHT)
    + Self::apply(s.dwell_time, p::CONT_DWELL_TIME_WEIGHT)
    + Self::apply(s.follow_author_score, p::FOLLOW_AUTHOR_WEIGHT)
    + Self::apply(s.not_interested_score, p::NOT_INTERESTED_WEIGHT)
    + Self::apply(s.block_author_score, p::BLOCK_AUTHOR_WEIGHT)
    + Self::apply(s.mute_author_score, p::MUTE_AUTHOR_WEIGHT)
    + Self::apply(s.report_score, p::REPORT_WEIGHT);
```

**マコト**: v3の第2章では「ポジティブ11種類、ネガティブ4種類」としか書いてない。各アクションの**具体的な影響度**が分からないと、実践に使えない。

**リサ**: 特に重要なのは：
- `dwell_score`（滞在時間）- どのくらいの時間で効果があるのか
- `vqv_score`（動画品質視聴）- 何秒以上見れば良いのか
- `share_via_dm_score` vs `share_via_copy_link_score` - DMシェアとリンクコピーの違い

### 問題2: フィルターの実践的対策が不足

**タクミ**: フィルターは12種類あるが、v3では「存在を説明」しているだけで「どう回避するか」が弱い。

```
【12種類のフィルター】
1. DropDuplicatesFilter - 重複排除
2. CoreDataHydrationFilter - メタデータ不足
3. AgeFilter - 古すぎる投稿
4. SelfTweetFilter - 自分の投稿
5. RetweetDeduplicationFilter - リツイート重複
6. IneligibleSubscriptionFilter - サブスク制限
7. PreviouslySeenPostsFilter - 既読
8. PreviouslyServedPostsFilter - 既配信
9. MutedKeywordFilter - ミュートキーワード
10. AuthorSocialgraphFilter - ブロック/ミュート関係
11. VFFilter - 違反コンテンツ
12. DedupConversationFilter - 会話重複
```

**マコト**: 実践者として知りたいのは「なぜ自分の投稿が表示されないのか」の診断方法だ。フィルターごとの対策を明確にすべき。

**ユウキ**: 「フィルターに引っかかる→対策する」のフローチャートがあると良い。

### 問題3: 検索（Retrieval）の説明が薄い

**タクミ**: `recsys_retrieval_model.py`のTwo-Tower検索は、非フォロワーに発見されるための核心部分なのに、説明が薄い。

```python
# 実際のコード（recsys_retrieval_model.py）
class PhoenixRetrievalModel:
    """Two-tower retrieval model for recommendation."""

    def user_tower(self, user_embedding, history_embeddings):
        # ユーザーの興味をベクトル化

    def candidate_tower(self, candidate_embedding):
        # 投稿をベクトル化

    def similarity_search(self, user_vec, candidate_vecs, top_k):
        # 類似度でマッチング
```

**リサ**: これ、めちゃくちゃ重要。「どうすれば自分の投稿が誰かの検索結果に表示されるか」の答えがここにある。

**マコト**: 具体的には：
- ユーザーの興味ベクトルに近いコンテンツを作る
- トレンドトピックに関連付ける
- 類似ユーザーがエンゲージしているコンテンツを参考にする

---

## Part 3: 追加すべき内容の洗い出し

**ユウキ**: 発見された問題を踏まえ、v3に追加すべき内容を整理しよう。

### 必須追加項目

| # | 項目 | 理由 | 追加先 |
|---|------|------|--------|
| 1 | 19種類のアクション詳細と重み | 実践の核心 | 第2章 |
| 2 | 滞在時間（Dwell）の具体的秒数 | 実践で最重要 | 第2章 |
| 3 | VQV（動画品質視聴）の条件詳細 | 動画戦略に必須 | 第8章 |
| 4 | フィルター回避フローチャート | 問題解決に必須 | 第5章 |
| 5 | Two-Tower検索の実践的活用法 | 発見されるために必須 | 新規章 |
| 6 | Candidate Isolationの意味 | 技術理解の核心 | 補足A |

### 推奨追加項目

| # | 項目 | 理由 | 追加先 |
|---|------|------|--------|
| 7 | スコアオフセット処理の説明 | ネガティブスコアの扱い | 第3章 |
| 8 | 正規化（normalize_score）の影響 | スコア比較の理解 | 第3章 |
| 9 | Thunderのリアルタイム性 | 投稿タイミングの科学的根拠 | 第6章 |
| 10 | Kafkaイベント処理の影響 | 削除・編集の影響 | 第5章 |

---

## Part 4: 章構成の再検討

**マコト**: 問題5の「Two-Tower検索」は新しい章が必要だと思う。これは「発見される仕組み」の核心だ。

**タクミ**: 同意。現状の10章構成では足りない。

**リサ**: 私も賛成。グロースの観点から、「発見」と「エンゲージメント」は分けて考えるべき。

**ユウキ**: では、12章構成に戻すことを提案する。ただし、前回の「12章は多すぎる」問題を解決するために、各章を短く濃くする。

### 新章構成案（v4）

```
【v4: 12章構成（各章15-20分、実践章は30分）】

Part 1: 基礎理解（1-3章）
├── 第1章: クイックスタート ⏱️15分
│   └── 30分で最初の改善を実行
├── 第2章: 19のエンゲージメント完全解説 ⏱️20分 ←強化
│   └── 全アクションの重みと影響度
└── 第3章: スコア計算の全貌 ⏱️20分 ←強化
    └── 計算式、オフセット、正規化

Part 2: 表示の仕組み（4-6章）
├── 第4章: 12のフィルター完全攻略 ⏱️20分 ←強化
│   └── フローチャート付き回避ガイド
├── 第5章: 発見される仕組み（Two-Tower） ⏱️20分 ←新規
│   └── 非フォロワーに届く原理
└── 第6章: タイミングと多様性 ⏱️15分
    └── 減衰係数、IN/OON、鮮度

Part 3: 実践テクニック（7-9章）
├── 第7章: 【実践①】投稿改善ワークショップ ⏱️30分
│   └── Before/After実践
├── 第8章: 動画・メディア完全攻略 ⏱️20分 ←強化
│   └── VQV条件、最適な長さ
└── 第9章: 【実践②】A/Bテスト実践 ⏱️30分
    └── データドリブン改善

Part 4: 成長戦略（10-12章）
├── 第10章: フォロワー獲得の科学 ⏱️20分
│   └── フォロー確率を上げる方法
├── 第11章: 長期成長ロードマップ ⏱️15分
│   └── フェーズ別戦略
└── 第12章: 【実践③】30日マスターチャレンジ ⏱️20分+実践
    └── 総合実践プログラム

補足資料
├── 補足A: 技術詳細（Transformer、アテンションマスク等）
├── 補足B: 用語集 & FAQ 50問
└── 補足C: テンプレート & チェックリスト集
```

**マコト**: この構成なら、マーケターとして必要な情報が全部入る。

**タクミ**: 技術的にもソースコードの主要部分をカバーできる。

**リサ**: 実践章が3つ（7章、9章、12章）あって、理論→実践のサイクルが回る。

**ユウキ**: 各章15-20分なら、忙しい人でも1日1章で12日で完走できる。

---

## Part 5: 各章の強化ポイント詳細

### 第2章強化: 19のエンゲージメント完全解説

**タクミ**: ソースコードから抽出した全アクションを整理する。

```
【ポジティブアクション（15種類）】
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
1. favorite_score (いいね)
   - 最も基本的なエンゲージメント
   - 重み: 中程度

2. reply_score (リプライ)
   - 会話を生むため高く評価
   - 重み: 高い

3. retweet_score (リツイート)
   - 拡散力の指標
   - 重み: 高い

4. quote_score (引用リツイート)
   - オリジナルコメント付きで高評価
   - 重み: 非常に高い

5. click_score (ツイートクリック)
   - 詳細を見たいという興味
   - 重み: 中程度

6. profile_click_score (プロフィールクリック)
   - フォロー検討の前兆
   - 重み: 高い

7. photo_expand_score (画像拡大)
   - 画像への興味
   - 重み: 中程度

8. vqv_score (動画品質視聴)
   - 一定時間以上の視聴
   - 重み: 高い（条件付き）

9. share_score (シェア)
   - 外部共有の意図
   - 重み: 非常に高い

10. share_via_dm_score (DMでシェア)
    - 個人的な推薦
    - 重み: 非常に高い

11. share_via_copy_link_score (リンクコピー)
    - 外部共有の準備
    - 重み: 高い

12. dwell_score (滞在)
    - 投稿での停止
    - 重み: 中程度

13. dwell_time (滞在時間・連続値)
    - 実際の滞在秒数
    - 重み: 秒数に比例

14. follow_author_score (著者フォロー)
    - 最高のエンゲージメント
    - 重み: 非常に高い

15. quoted_click_score (引用元クリック)
    - 文脈への興味
    - 重み: 中程度

【ネガティブアクション（4種類）】
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
16. not_interested_score (興味なし)
    - 明示的な拒否
    - 重み: 負の高い値

17. block_author_score (ブロック)
    - 最も強い拒否
    - 重み: 負の非常に高い値

18. mute_author_score (ミュート)
    - 静かな拒否
    - 重み: 負の高い値

19. report_score (報告)
    - 違反の疑い
    - 重み: 負の非常に高い値
```

**マコト**: これは実践者にとって宝の山だ。「何をすればスコアが上がるか」が明確になる。

**リサ**: 特に`dwell_time`が連続値なのが重要。「ちょっと見た」と「じっくり読んだ」で差が出る。

### 第4章強化: 12のフィルター完全攻略

**タクミ**: フィルターを「対策可能」と「対策不可能」に分類する。

```
【対策可能なフィルター（7種類）】
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. AgeFilter（投稿年齢）
   問題: 古い投稿は表示されにくい
   対策: 定期的に新しい投稿を作成
   診断: 投稿日時を確認

2. MutedKeywordFilter（ミュートキーワード）
   問題: ユーザーがミュートした単語を含む
   対策: センシティブな単語を避ける
   診断: 炎上しやすいワードをチェック

3. AuthorSocialgraphFilter（ブロック/ミュート関係）
   問題: ユーザーにブロック/ミュートされている
   対策: 攻撃的な投稿を避ける
   診断: エンゲージメント率の急落

4. VFFilter（違反コンテンツ）
   問題: ポリシー違反
   対策: ガイドライン遵守
   診断: 警告通知の有無

5. RetweetDeduplicationFilter（リツイート重複）
   問題: 同じ内容のリツイートが重複
   対策: 引用RTでオリジナルコメントを追加
   診断: RTが表示されているか確認

6. IneligibleSubscriptionFilter（サブスク制限）
   問題: 有料コンテンツへのアクセス制限
   対策: 無料ティアも用意
   診断: サブスク設定確認

7. DedupConversationFilter（会話重複）
   問題: 同じスレッドの複数分岐
   対策: スレッドを整理
   診断: 会話の構造確認

【対策困難なフィルター（5種類）】
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

8. DropDuplicatesFilter（重複排除）
   → システム処理、ユーザー側で対策不要

9. CoreDataHydrationFilter（メタデータ不足）
   → システムエラー、再投稿で解決

10. SelfTweetFilter（自分の投稿）
    → 自分のタイムラインには自分の投稿は出ない（仕様）

11. PreviouslySeenPostsFilter（既読）
    → 既に見た投稿は出ない（仕様）

12. PreviouslyServedPostsFilter（既配信）
    → 既に配信済みは出ない（仕様）
```

**ユウキ**: これをフローチャートにすると、問題解決が早くなる。

### 第5章新規: 発見される仕組み（Two-Tower）

**タクミ**: これが最も重要な新規章。

```
【Two-Tower検索の仕組み】

┌─────────────────┐     ┌─────────────────┐
│   User Tower    │     │ Candidate Tower │
│                 │     │                 │
│ あなたの興味を  │     │ 投稿の特徴を    │
│ ベクトル化      │     │ ベクトル化      │
└────────┬────────┘     └────────┬────────┘
         │                       │
         ▼                       ▼
    ┌─────────┐             ┌─────────┐
    │ [0.8,   │             │ [0.7,   │
    │  0.3,   │             │  0.4,   │
    │  0.9,   │   類似度    │  0.8,   │
    │  ...]   │◄───計算───►│  ...]   │
    └─────────┘             └─────────┘
         │                       │
         └───────────┬───────────┘
                     ▼
            ┌───────────────┐
            │ マッチング！  │
            │ あなたに表示  │
            └───────────────┘
```

**マコト**: これを理解すれば、「非フォロワーに発見されるには何をすべきか」が分かる。

**リサ**: 具体的な戦略：
1. **類似ユーザーを意識**: 自分と似た興味を持つユーザーが反応するコンテンツを作る
2. **トピック一貫性**: 特定分野に特化してベクトルを明確にする
3. **エンゲージメントの質**: 「いいね」より「リプライ」「シェア」を獲得

---

## Part 6: 最終判定

**ユウキ**: v3のレビュー結果をまとめよう。

### 網羅性評価

| カテゴリ | v3網羅度 | v4目標 |
|---------|---------|--------|
| スコアリング | 65% | 95% |
| フィルタリング | 50% | 90% |
| 検索（Retrieval） | 30% | 85% |
| 実践テクニック | 70% | 90% |
| 成長戦略 | 75% | 85% |
| **総合** | **58%** | **90%** |

### 決定事項

1. **章数**: 10章 → 12章に変更
2. **新規章**: 第5章「発見される仕組み」を追加
3. **強化章**: 第2章、第3章、第4章、第8章を大幅強化
4. **実践章**: 3章維持（第7章、第9章、第12章）

**マコト**: これでマーケターとして必要な情報が揃う。

**タクミ**: 技術的にもソースコードを正確に反映できる。

**リサ**: グロースハックに必要なデータドリブンの視点も入った。

**ユウキ**: 読者が迷わない構成になった。

**全員**: v4の詳細設計に進もう。

---

*レビュー会議終了*
*次のステップ: 最終ガイド企画設計詳細会議*
