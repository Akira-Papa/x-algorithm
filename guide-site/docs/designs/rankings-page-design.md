# 設計書: Xの行動ランキングページ

**作成日**: 2026-01-21
**バージョン**: 1.0
**関連会議**: docs/meetings/2026-01-21-rankings-page.md

---

## 1. 概要

### 目的
サイドバーのホームの下に「Xの行動ランキング」として、やったほうがいいこと・やってはいけないことをランキング形式で表示するページを提供する。

### スコープ
- サイドバーメニューの変更
- ランキングデータの更新（ガイド第2章との整合）
- 既存UI・ページ構造は維持

---

## 2. 変更対象ファイル

| ファイル | 変更内容 |
|----------|----------|
| `src/components/ui/Sidebar.tsx` | メニュー名を「Xの行動ランキング」に変更 |
| `src/lib/rankings.ts` | ランキングデータをガイド内容と整合 |

---

## 3. データ設計

### 3.1 やったほうがいいランキング（TOP 10）

ソースコード `weighted_scorer.rs` のエンゲージメント重みを基準に構成。

| 順位 | タイトル | 重み | 参照章 |
|------|----------|------|--------|
| 1 | リプライを獲得する投稿を作る | 13.5x（27倍） | 2, 3, 7 |
| 2 | プロフィールクリックを誘発する | 12.0x（24倍） | 2, 10 |
| 3 | フォローを獲得する | 4.0x（8倍） | 2, 10 |
| 4 | 長い滞在時間を確保する投稿 | 動的計算 | 2, 9 |
| 5 | 動画でVQVを獲得する | 1.5x（3倍） | 9 |
| 6 | 引用RTを誘発する | 1.1x（2.2倍） | 2, 7 |
| 7 | リポストされる投稿を作る | 1.0x（2倍） | 2 |
| 8 | ブックマークされる投稿を作る | 1.0x（2倍） | 2 |
| 9 | フォロワーのアクティブ時間に投稿 | 初動ブースト | 5, 8 |
| 10 | 一貫したテーマで発信する | 専門性向上 | 4, 10 |

### 3.2 やってはいけないランキング（TOP 10）

ネガティブエンゲージメント重みと第12章のやってはいけないTOP5を統合。

| 順位 | タイトル | 重み/影響 | 参照章 |
|------|----------|-----------|--------|
| 1 | 通報されるコンテンツを投稿 | -10.0（-20倍） | 2, 6 |
| 2 | ブロックされる行為をする | -10.0（-20倍） | 2, 6 |
| 3 | 外部リンクを本文に入れる | スコア大幅低下 | 2, 5, 6 |
| 4 | ミュートされるコンテンツを投稿 | -5.0（-10倍） | 2, 6 |
| 5 | フォロワーを購入する | Trust Score壊滅 | 10 |
| 6 | 攻撃的・差別的な表現 | NEV急増→フィルター | 6 |
| 7 | 連続投稿の乱発 | Author Diversityペナルティ | 8 |
| 8 | エンゲージメントベイト | ML検出で減点 | 2, 5, 6 |
| 9 | スパム的なハッシュタグ乱用 | スパム判定 | 6 |
| 10 | 同じ内容の繰り返し投稿 | スパム判定 | 6, 8 |

---

## 4. UIデザイン

### 4.1 サイドバー
```
ホーム
Xの行動ランキング  <- 名称変更
ガイド
  1 全体像と思想
  ...
```

### 4.2 ページ構成（既存維持）
- ヘッダー: タイトル + 説明
- 注意書き: アルゴリズム更新についての注意
- 2カラムグリッド:
  - 左: やったほうがいい TOP 10（緑色系）
  - 右: やってはいけない TOP 10（赤色系）
- CTAセクション: ガイドへの導線

### 4.3 カードデザイン（既存維持）
- ランク番号（丸アイコン）
- タイトル
- インパクトバッジ（最重要/重要/普通/軽微）
- 影響度（+13.5倍、-10倍 など）
- 説明文
- Tips（あれば）
- 関連章リンク

---

## 5. 実装詳細

### 5.1 Sidebar.tsx の変更

```tsx
// 変更前
<span>ランキング</span>

// 変更後
<span>Xの行動ランキング</span>
```

title属性も同様に変更。

### 5.2 rankings.ts の変更

#### インパクトレベルの基準
- `critical`: 重み 10.0以上または最重要戦略
- `high`: 重み 3.0以上
- `medium`: 重み 1.0以上
- `low`: 重み 1.0未満または間接的影響

#### データ構造（維持）
```typescript
interface RankingItem {
  rank: number;
  title: string;
  description: string;
  impact: string;        // "+13.5倍" or "-10倍"
  impactLevel: 'critical' | 'high' | 'medium' | 'low';
  relatedChapters: number[];
  tips?: string;
}
```

---

## 6. テスト計画

- [ ] サイドバーのリンク表示確認
- [ ] ページ遷移動作確認
- [ ] モバイル表示確認
- [ ] ダークモード表示確認
- [ ] 各関連章リンクの動作確認

---

## 7. 参照資料

- 第2章: エンゲージメント19種類の完全解説
- 第6章: 12種類のフィルター
- 第12章: 総まとめと実践ロードマップ
- 技術仕様書: スコアリングシステム仕様書
